/*
 * PROGRAM ID   : Rand.c
 * PROGRAM NAME : Rand 모듈
 * AUTHOR       : (주)ICA
 * COMMENT      : Rand 모듈
 * HISTORY      : 2013.09.28 강석. 최초작성
 *
 * DATE.2013.09.28 : 임의의 배열에서 선택가능한 항목들 중에서 Random 하게 선택함.
 *
 */

#include <Common.h>

/*============================================================================*/
/*
 * define constant
 */
/*----------------------------------------------------------------------------*/

/*============================================================================*/
/*
 * global variables
 */
/*----------------------------------------------------------------------------*/

/*============================================================================*/
/*
 * 내용 : 
 */
/*----------------------------------------------------------------------------*/
int RandGetInt()
/*----------------------------------------------------------------------------*/
{
	BOOL flag = TRUE;

	static time_t seed = 0;

	if (flag)
	{
		if (seed == 0)
		{
			seed = time(NULL);
			srand(seed);
		}
	}

	return rand();
}

/*============================================================================*/
/*
 * 내용 : 
 */
/*----------------------------------------------------------------------------*/
int RandGetItem(int* iNum, int num)
/*----------------------------------------------------------------------------*/
{
	BOOL flag = TRUE;

	if (flag)
	{
		int direct = RandGetInt() % 2;
		
		int idx = RandGetInt() % num;
		
		int i;
		for (i=0; i < num; i++)
		{
			if (iNum[idx] != 0)
			{
				return iNum[idx];
			}
			
			if (direct)
			{
				idx ++;
				idx = idx % num;
			}
			else
			{
				idx --;
				if (idx < 0) idx = num - 1;
			}
		}
	}

	return -1;
}

/******************************************************************************/
/******************************************************************************/
/******************************************************************************/
/******************************************************************************/
/******************************************************************************/

#ifdef _EXE

/*============================================================================*/
/*
 * 위에서 정의한 함수를 테스트 한다.
 */
/*----------------------------------------------------------------------------*/
main(int argc, char* argv[])
/*----------------------------------------------------------------------------*/
{
	BOOL flag = TRUE;

	sProgName = argv[0];

	if (flag) printf("\x1b[44m< %s >\x1b[0m\n", sProgName);

	if (!flag)
	{
		LOG(_FL_, 0, 0, "[%d]", RandGetInt());
	}
	
	if (flag)
	{
		int iNum[10] = { 2, 4, 0, 0, 0, 9, 0, 0, 0, 0 };
		int noNum;
		
		noNum = sizeof(iNum) / sizeof(iNum[0]);
		noNum = 2;
		
		printf(" choice number is %d.\n", RandGetItem((int*)&iNum, noNum));
	}
}

#endif
